<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <title>주소검색 & 사용자가 마커 지정2</title>
</head>

<body>
    <div class="search" style="display: block;">
        <input id="address" type="text" placeholder="검색할 주소">
        <input id="submit" type="button" value="주소검색" onclick="searchAddress()">
    </div>
    <div id="map" style="width: 100%; height: 800px;"></div>

    <script>
        function searchAddress() {
            var address = document.getElementById('address').value;

            if (address) {
                naver.maps.Service.geocode({
                    query: address
                }, function (status, response) {
                    if (status === naver.maps.Service.Status.OK) {
                        var item = response.result.items[0];
                        var point = new naver.maps.Point(item.point.x, item.point.y);

                        map.setCenter(point);
                        marker.setPosition(point);
                        marker.setVisible(true);
                    } else {
                        alert('주소를 찾을 수 없습니다.');
                    }
                });
            } else {
                alert('주소를 입력해주세요.');
            }
        }

        function initializeMap() {
            var map = new naver.maps.Map('map', {
                center: new naver.maps.LatLng(34.8026, 126.3898),
                zoom: 14
            });

            var marker = new naver.maps.Marker({
                map: map,
                visible: false
            });

            naver.maps.Event.addListener(map, 'click', function (e) {
                marker.setPosition(e.latlng);
                marker.setVisible(true);
            });
        }

    </script>

    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=2yf3rqafqw" onload="initializeMap()"></script>
</body>

</html>
